#######################################################
# This file defines the various input varibles for Development Tests of GEFS
#######################################################
#
# Define DEVELOPMENT Enviorenmenat variables related to the TYPE of test 
export RUN_ENVIR=${RUN_ENVIR:-dev}
export envir=${envir:-dev}
export SENDDBN=${SENDDBN:-NO}
export SENDDBN_NTC=${SENDDBN_NTC:-NO}

export PARAFLAG=${PARAFLAG:-YES}
export SENDECF=${SENDECF:-NO}
export SENDCOM=${SENDCOM:-YES}
export KEEPDATA=${KEEPDATA:-YES}

# Enviorenmenat variables related to Development work place and output files
#
export COMROOT=$baseoutput/com
export GESROOT=$baseoutput/nwges
export DATAROOT=$baseoutput/tmpnwprd
export DCOMROOT=${DCOMROOT:-/dcom}
export PCOMROOT=$baseoutput/pcom/$envir

export GESROOTp1=$GESROOTp1
export archsyndir=${archsyndir:-$COMROOTp1/arch/prod/syndat}
export DBNROOT=

export HOMEgefs=$basesource
export HOMEtrak=${HOMEtrak:-$HOMERFC/ens_tracker.v1.1.13}
export HOMEgfs=${HOMEgfs:-${HOMEDIR:-${HOMEgefs}}}
export HOMEgsi=${HOMEgfs:-$HOMEgfs}
export HOMEwave=${HOMEwave:-$HOMEgefs}
export HOMEpost=${HOMEpost:-$HOMEgfs}

if [[ ! -d $SOURCEDIR/sorc/global-workflow.fd ]] ; then
    export EXECwave=${HOMEgfs}/sorc/fv3gfs.fd/WW3/model/exe

    export FCSTEXECDIR=${FCSTEXECDIR:-$HOMEgfs/sorc/fv3gfs.fd/NEMS/exe}
    export FIXwave=${FIXwave:-$HOMEwave/fix_wave}

    export HOMEchem=${HOMEchem:-$HOMEgfs/sorc/gsd_prep_chem.fd/workflow/emc-global}
fi

#Check and verify the most importand environment variables
# export NDATE=${NDATE:-$USHutil/ndate}

# export WGRIB=${WGRIB:-$EXECgrib/wgrib}
# export GRBINDEX=${GRBINDEX:-$EXECgrib/grbindex}
# export COPYGB=${COPYGB:-$EXECgrib/copygb}
# export WGRIB2=${WGRIB2:-$EXECgrib/wgrib2}
# export GRB2INDEX=${GRB2INDEX:-$EXECgrib/grb2index}
# export COPYGB2=${COPYGB2:-$EXECgrib/copygb2}
# export CNVGRIB=${CNVGRIB:-$EXECgrib/cnvgrib21_gfs}
# export CNVGRIB21_GFS=${CNVGRIB21_GFS:-$EXECgrib/cnvgrib21_gfs}
# export SUPVIT=$SUPVIT

export NET=gens

GFSArchivedData=no
if [[ $GFSArchivedData == "yes" ]]; then
    # HOMEdata, COMINgfs_base, COMINenkf_base and COMINcfs_base are defined in setbase, pointing to the NCO  gfs.v15 parallel
    # However, if you use gfs/enkf data from archived data, you may speficfy them in this "if" block and make GFSArchivedData=yes

    export COMINenkf_base=$HOMEdata/fv3init/enkfgdas.
    export COMINgfs_base=$HOMEdata/fv3init/gfs.
    export COMINcfs_base=$HOMEdata/cfs/cfs.
    export COMICE=$HOMEdata/sea_ice
else
    export COMINgfs_base=$(compath.py gfs/prod)/gfs.
    export COMINenkf_base=$(compath.py gfs/prod)/enkfgdas.
    export COMINcfs_base=$(compath.py cfs/prod)/cfs/cfs.
    export COMICE=/gpfs/dell1/nco/ops/com/omb/prod # No compath.py alias yet
fi # [[ $GFSArchivedData == "yes" ]]

export COMINgfs=${COMINgfs:-${COMINgfs_base}${PDY}/$cyc}
export COMINenkf=${COMINenkf:-${COMINenkf_base}}
export COMINcfs=${COMINcfs:-${COMINcfs_base}}

