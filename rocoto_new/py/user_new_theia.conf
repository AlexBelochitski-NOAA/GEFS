# Very important items, users should change them based on his/her needs
HPS_PTMP          =   hps
MEM_Num           =   10
# Whether generate standalone .ent file for each jobs
GenTaskEnt        =   NO
GenParm           =   YES
GenBinSH          =   NO
# You may not change the items before
RUN_INIT          =   YES
RUN_FORECAST_HIGH =   YES
RUN_CHGRES        =   NO
RUN_FORECAST_LOW  =   NO
RUN_TRACK         =   YES
RUN_CLEANUP       =   YES
RUN_OTHERS        =   YES
INCYC             =   24
CYCLE_THROTTLE    =   1
TASK_THROTTLE     =   65
#GEFS_ROCOTO       =   /gpfs/hps3/emc/ensemble/save/First.Last/GEFS/TEST/nwdev/rocoto
WORKDIR           =   /scratch4/NCEPDEV/stmp4/First.Last/o
#SOURCEDIR         =   /gpfs/hps3/emc/ensemble/save/First.Last/GEFS
KEEP_DIR          =  /gpfs/hps3/emc/ensemble/noscrub/First.Last/GEFS
HPSS_DIR          =  /NCEPDEV/emc-ensemble/2year/First.Last/GEFS
DIRS_TO_KEEP      =  ensstat,pgrb2a1p0,pgrb2a2p5,pgrb2ap5,tctrack
DIRS_TO_ARCHIVE   =  ensstat,pgrb2a1p0,pgrb2a2p5,pgrb2ap5,tctrack
#====
ACCOUNT           =   fv3-cpu
CUE2RUN           =   batch
TRANSFER_QUEUE    =   service
SCHEDULER         =   moabtorque
# +++++++++++++++++++++++++++++ For gefs_dev.parm, +++++++++++++++++++++++++++++\/\/
ENS_SPS           =   .false.
DO_SPPT           =   YES
DO_SHUM           =   YES
DO_SKEB           =   YES
#define tmp time step
DELTIM            =   300
k_split           =   1
n_split           =   8
TYPE              =   nh
MONO              =   non-mono
# cpu geometry
layout_x          =   4
layout_y          =   8
WRITE_GROUP       =   2
WRTTASK_PER_GROUP =   24
parallel_threads  =   2
fhmax             =   384
fhmaxh            =   384
# for test, NOT USED FOR PRODUCTION gfssource = dev, para, prod
gfssource         =   prod
# set all the following "make" and "save" flags to "yes" to simulate production
makepgrba         =   no
makepgrbb         =   no
makepgrb2b        =   yes
saveflux          =   yes
savesfcsig        =   no
sigzvd            =   no
# +++++++++++++++++++++++++++++ For gefs_dev.parm, +++++++++++++++++++++++++++++/\/\
# *****************************************
jgefs_enkf_track_walltime       = 01:50:00
jgefs_enkf_track_nodes          = 2
jgefs_enkf_track_ppn            = 20
jgefs_enkf_track_memory         = 3000M
jgefs_enkf_track_join           = &LOG_DIR;/@Y@m@d/gefs_enkf_track_@H.$PBS_JOBID
jgefs_enkf_track_queue          = &CUE2RUN;
# *****************************************
jgefs_init_separate_walltime    = 01:50:00
jgefs_init_separate_nodes       = 10
jgefs_init_separate_ppn         = 4
jgefs_init_separate_tpp         = 6
jgefs_init_separate_memory      = 50000M
jgefs_init_separate_join        = &LOG_DIR;/@Y@m@d/gefs_init_separate_@H.$PBS_JOBID
jgefs_init_separate_queue       = &CUE2RUN;
jgefs_init_separate_dep         = <taskdep task="jgefs_enkf_track"/>
# *****************************************
jgefs_init_process_walltime     = 01:50:00
jgefs_init_process_nodes        = 8
jgefs_init_process_ppn          = 4
jgefs_init_process_tpp          = 6
jgefs_init_process_memory       = 100000M
jgefs_init_process_join         = &LOG_DIR;/@Y@m@d/gefs_init_process_@H.$PBS_JOBID
jgefs_init_process_queue        = &CUE2RUN;
jgefs_init_process_dep          = <taskdep task="jgefs_init_separate"/>
# *****************************************
jgefs_init_combine_walltime     = 01:50:00
jgefs_init_combine_nodes        = 20
jgefs_init_combine_ppn          = 2
jgefs_init_combine_memory       = 30000M
jgefs_init_combine_join         = &LOG_DIR;/@Y@m@d/gefs_init_combine_@H.$PBS_JOBID
jgefs_init_combine_queue        = &CUE2RUN;
jgefs_init_combine_dep          = <taskdep task="jgefs_init_process"/>
# *****************************************
jgefs_init_fv3chgrs_walltime    = 00:30:00
jgefs_init_fv3chgrs_nodes       = 1
jgefs_init_fv3chgrs_ppn         = 12
jgefs_init_fv3chgrs_tpp         = 2
jgefs_init_fv3chgrs_memory      = 50000M
jgefs_init_fv3chgrs_join        = &LOG_DIR;/@Y@m@d/gefs_#member#_init_fv3chgrs@H.$PBS_JOBID
jgefs_init_fv3chgrs_queue       = &CUE2RUN;
jgefs_init_fv3chgrs_dep         = <taskdep task="jgefs_init_combine"/>
# ***************************************** nodes, ppn and tpp will be derived from parm automatically
jgefs_forecast_high_walltime    = 03:00:00
#jgefs_forecast_high_nodes       = 20
#jgefs_forecast_high_ppn         = 12
#jgefs_forecast_high_tpp         = 2
jgefs_forecast_high_memory      = 200000M
jgefs_forecast_high_join        = &LOG_DIR;/@Y@m@d/gefs_#member#_forecast_high_@H.$PBS_JOBID
jgefs_forecast_high_queue       = &CUE2RUN;
jgefs_forecast_high_dep         = <taskdep task="jgefs_init_fv3chgrs_#member#"/>
# *****************************************
jgefs_post_high_walltime        = 02:30:00
jgefs_post_high_nodes           = 3
jgefs_post_high_ppn             = 12
jgefs_post_high_tpp             = 2
#jgefs_post_high_memory          = 3000M
jgefs_post_high_join            = &LOG_DIR;/@Y@m@d/gefs_#member#_post_high_@H.$PBS_JOBID
jgefs_post_high_queue          = &CUE2RUN;
jgefs_post_high_dep             =  <datadep><cyclestr>&DATA_DIR;/gefs.@Y@m@d/@H/sfcsig/#member#/ge#member#.t@Hz.logf000.nemsio</cyclestr></datadep>
# *****************************************
jgefs_prdgen_high_walltime      = 01:30:00
jgefs_prdgen_high_nodes         = 1
jgefs_prdgen_high_ppn           = 5
jgefs_prdgen_high_tpp           = 4
jgefs_prdgen_high_memory        = 30000M
jgefs_prdgen_high_join          = &LOG_DIR;/@Y@m@d/gefs_#member#_prdgen_high_@H.$PBS_JOBID
jgefs_prdgen_high_queue         = &CUE2RUN;
jgefs_prdgen_high_dep           = <datadep><cyclestr>&DATA_DIR;/gefs.@Y@m@d/@H/misc/post/ge#member#.t@Hz.master.control.f00</cyclestr></datadep>
# *****************************************
jgefs_ensstat_high_walltime     = 01:30:00
jgefs_ensstat_high_nodes        = 1
jgefs_ensstat_high_ppn          = 3
jgefs_ensstat_high_tpp          = 4
jgefs_ensstat_high_memory       = 30000M
jgefs_ensstat_high_join         = &LOG_DIR;/@Y@m@d/gefs_ensstat_high_@H.$PBS_JOBID
jgefs_ensstat_high_queue        = &CUE2RUN;
jgefs_ensstat_high_dep          = <metataskdep metatask="jgefs_prdgen_high"/>
# *****************************************
jgefs_post_track_walltime       = 00:45:00
jgefs_post_track_nodes          = 3
jgefs_post_track_ppn            = 7
jgefs_post_track_memory         = 10000M
jgefs_post_track_join           = &LOG_DIR;/@Y@m@d/gefs_post_track_@H.$PBS_JOBID
jgefs_enkf_track_queue          = &CUE2RUN;
jgefs_post_track_dep            = <metataskdep metatask="jgefs_prdgen_high"/>
# *****************************************
jgefs_post_genesis_walltime     = 00:45:00
jgefs_post_genesis_nodes        = 3
jgefs_post_genesis_ppn          = 7
#jgefs_post_genesis_memory       = 3000M
jgefs_post_genesis_join         = &LOG_DIR;/@Y@m@d/gefs_post_genesis_@H.$PBS_JOBID
jgefs_enkf_track_queue          = &CUE2RUN;
jgefs_post_genesis_dep          = <metataskdep metatask="jgefs_prdgen_high"/>
# *****************************************
jgefs_enspost_walltime          = 01:29:00
jgefs_enspost_nodes             = 1
jgefs_enspost_ppn               = 1
jgefs_enspost_tpp               = 24
jgefs_enspost_memory            = 3000M
jgefs_enspost_join              = &LOG_DIR;/@Y@m@d/gefs_enspost_@H.$PBS_JOBID
jgefs_enkf_track_queue          = &CUE2RUN;
jgefs_enspost_dep               = <taskdep task="jgefs_ensstat_high"/>
# *****************************************
jgefs_keep_data_walltime        = 00:30:00
jgefs_keep_data_nodes           = 1
jgefs_keep_data_ppn             = 1
jgefs_keep_data_tpp             = 1
jgefs_keep_data_memory          = 3000M
jgefs_keep_data_join            = &LOG_DIR;/@Y@m@d/gefs_keep_data_@H.$PBS_JOBID
jgefs_keep_data_queue           = &CUE2RUN;
jgefs_keep_data_dep             = <taskdep task="jgefs_enspost"/>
# *****************************************
jgefs_archive_walltime          = 06:00:00
jgefs_archive_nodes             = 1
jgefs_archive_ppn               = 1
jgefs_archive_tpp               = 1
jgefs_archive_memory            = 3000M
jgefs_archive_join              = &LOG_DIR;/@Y@m@d/gefs_archive_@H.$PBS_JOBID
jgefs_archive_queue             = &TRANSFER_QUEUE;
jgefs_archive_dep               = <taskdep task="jgefs_enspost"/>
# *****************************************
jgefs_cleanup_walltime          = 00:30:00
jgefs_cleanup_nodes             = 1
jgefs_cleanup_ppn               = 1
jgefs_cleanup_tpp               = 1
jgefs_cleanup_memory            = 3000M
jgefs_cleanup_join              = &LOG_DIR;/@Y@m@d/gefs_cleanup_@H.$PBS_JOBID
jgefs_cleanup_queue             = &CUE2RUN;
jgefs_cleanup_dep               = <and>\n\t<taskdep task="jgefs_keep_data"/>\n\t<taskdep task="jgefs_archive"/>\n</and>
# *****************************************
# Rarely changed default
BIN             =   &GEFS_ROCOTO;/bin/&WHERE_AM_I;
PRE             =   &GEFS_ROCOTO;/bin/gefs_pre_job.sh
WORKFLOW_LOG_DIR  =   &GEFS_ROCOTO;/logs
LOG_DIR         =   &WORKDIR;/com/output/dev
tmpnwprd        =   &WORKDIR;/tmpnwprd
DATA_DIR        =   &WORKDIR;/com/gens/dev
##### taskname is for development, if you have taskname, RUN_* will NOT be used to determine the tasks!
#taskname        =    jgefs_enkf_track
#taskname        =    jgefs_init_separate
#taskname        =    jgefs_init_process
#taskname        =    jgefs_init_combine
#taskname        =    jgefs_init_fv3chgrs
#taskname        =    jgefs_forecast_high
#taskname        =    jgefs_post_high
#taskname        =    jgefs_prdgen_high
#taskname        =    jgefs_ensstat_high
#taskname        =    jgefs_post_track
#taskname        =    jgefs_post_genesis
#taskname        =    jgefs_enspost
#taskname        =    jgefs_keep_data
#taskname        =    jgefs_archive
#taskname        =    jgefs_cleanup
#====
#taskname_add    =    jgefs_anything
#-------
#XML             =   gefs_new.xml
#DB              =   gefs_new.db
#crontab         =   cron_rocoto_new
# *****************************************
