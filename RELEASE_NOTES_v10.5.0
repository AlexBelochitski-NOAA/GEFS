Release Note: GEFS LEGACY v.10.3.6

v10.0.0 . released Feb 1, 2012
. Implementation on CCS

v10.1.0 . released July 25, 2013
. Modified model to run on WCOSS

v10.2.0 . released Oct 16, 2014 (The first version in EE structure, but contains only part of the
package: GEFS_INIT jobs and GEFS_PRDGEN_GFS)
. Modified initialization to run downstream of GFS implementation

v10.2.1 . released Jan 1, 2015
. As implemented with GFS implementation Jan 14, 2015

v10.3.0 -- released August 12, 2015
. Legacy GEFS to continue uncalibrated GEFS v10 products for users who calibrate them using
the GEFS V10 reforecasts
. Minimal changes from current production, including the following:
. Remaining GEFS jobs have been converted to vertical structure
. Bug fixes that change the products slightly:
. Forecast model bug (that caused crashes in 201410 and 201506) is fixed
. Relocation code bugs discovered during V11 development are fixed
. /COM and /NWGES directories are renamed to gefs_legacy
. Version file is renamed to gefs_legacy.ver to avoid name collision with gefs.ver
. pgrb2c, pgrbd, and pgrb2d products and their DBN alerts are turned off
. CQPF job has been removed because it provides calibrated products
. forecasts for 06Z, 12Z, and 18Z are shortened to 6 hours
. all dbn alerts for these forecasts are turned off
. the only known downstream user of these forecasts is the wave ensemble
. ENSPOST and ENSSTAT jobs do not need to be run for these cycles
. error checking developed for V11 has been added to the INIT, POST, and
PRDGEN jobs
. resources and runtimes are unchanged except for the shortened 06Z, 12Z, and 18Z forecasts
. the RESTART_COPY job is optional; it only needs to be done if crashed forecasts need to be
rerun from the latest restart files instead of being rerun from the beginning
. To implement:
. check out into /nw$envir/gefs.v10.3.0
. in sorc subdirectory (to build and install codes in sorc, sorc.tracker, and util/sorc):
. sh build.sh
. sh install.sh
. copy the version file to the directory /nw$envir/versions
. There is a test run for comparison:
. source: /ensemble/save/Richard.Wobus/s/rwik/nwdev/gefs.v10.3.0
. products: /ptmpd2/emc.enspara/o/rwik/com/gens/dev
. To run identically to this test run, copy the sfcsig and track subdirectories from
one cycle and start running the next cycle.

v10.3.1 released August 18, 2015
. Correct directories used for scripts and codes
. Turn off transmission of hurricane tracks to archives
. Implementation instructions are unchanged from v10.3.0
. The new test run for comparison is:
. source: /ensemble/save/Richard.Wobus/s/rwio/nwdev/gefs.v10.3.0
. products: /ptmpd2/emc.enspara/o/rwio/com/gens/dev

v10.3.2 released September 4, 2015
. merge changes from v10.2.1 as run in production
. remove obsolete options from j-jobs
. turn off unneeded DBN alerts and track archives
. Implementation instructions are unchanged from v10.3.0
. The new test run for comparison is:
. source: /ensemble/save/Richard.Wobus/s/rwir/nwdev/gefs.v10.3.2
. products: /ptmpd2/emc.enspara/o/rwir/com/gens/dev

v10.3.3 released September 27, 2015
. disable long track products a*trackatcfunix for 06Z, 12Z, and 18Z cycles
. modify all DBN alerts to a standard model name for the GEFS Legacy system
. modify file location specifications to run under gefs_legacy.v10.3.* instead of gefs.v10.3.*
. To implement:
. check out into /nw$envir/gefs_legacy.v10.3.3
. remaining instructions are unchanged from gefs.v10.3.0
. There is a test run on gyre for comparison:
. source: /ensemble/save/Richard.Wobus/s/rwiu/nwdev/gefs_legacy.v10.3.3
. products: /ptmpd2/emc.enspara/o/rwiu/com/gens/dev
. To run identically to this test run, copy the sfcsig and track subdirectories from
one cycle and start running the next cycle.

v10.3.4 released December 21, 2015
. modify post cleanup job to save all 00Z sfcsig and sflux files
. mirror these files for downstream applications
. implementation instructions:
. use new tag: https://svnemc.ncep.noaa.gov/projects/gefs/tags/gefs_legacy.v10.3.4
. check out into /nw$envir/gefs_legacy.v10.3.4
. add 00Z sfcsig and sflux files to the mirror to theia
. add 378h sfcsig and sflux files to the mirror to the dev machine
. remaining instructions are unchanged from gefs.v10.3.0
. There will be a test run on gyre for comparison:
. source: /ensemble/save/Richard.Wobus/s/rwja/nwdev/gefs_legacy.v10.3.4
. products: /ptmpd2/Richard.Wobus/o/rwja/com/gens/dev/gefs.v20151218/12
. To run identically to this test run, copy the sfcsig and track subdirectories from
the previous cycle of the test run or the production legacy GEFS and then run
the test cycle

V10.3.5 released March 20, 2016
. Modify J-jobs to take GFS data from new location on /com2

V10.3.6 released March 17, 2017
. Modify parm/gefs_init.parm and jobs/GEFS_INIT_SEPARATE to specify and process GFS analysis
in NEMSIO format
. Increase memory for GEFS_PRDGEN_GFS job to process higher-resolution master post files
. Cleanup
  . remove obsolete job_cards directory
  . add ecf directory including memory change for GEFS_PRDGEN_GFS job
. implementation instructions:
  . use new tag: https://svnemc.ncep.noaa.gov/projects/gefs/tags/gefs_legacy.v10.3.6
  . check out into /nw$envir/gefs_legacy.v10.3.6
  . modify ecf script for GEFS_PRDGEN_GFS to increase memory to 2000
  . remaining instructions are unchanged from gefs.v10.3.0
  . There is a test run on the dev WCOSS phase 1 machine for comparison:
    . source: /ensemble/save/Richard.Wobus/s/rwme/nwdev/gefs_legacy.v10.3.6
    . products: /ptmpd2/emc.enspara/o/rwme/com/gens/dev/
    . To run identically to this test run, copy the sfcsig and track subdirectories from
the previous cycle of the test run

v10.5.0 to be released on 01/24/2020

. Transition from Tide/Gyre phase 1 to Mars/Venus

. This release is based on GEFS_legacy V10.4.1:

. New VLAB tag:
    . https://vlab.ncep.noaa.gov/code-review/#/admin/projects/GEFS,tags
      checkout the tag named gefs_legacy_v10.5.0

. Updated files include:
    . jobs/JGEFS_CQPF 
    . jobs/JGEFS_ENSPOST 
    . jobs/JGEFS_ENSSTAT 
    . jobs/JGEFS_ENS_TRAK_AVE 
    . jobs/JGEFS_FORECAST 
    . jobs/JGEFS_INIT_COMBINE 
    . jobs/JGEFS_INIT_ET 
    . jobs/JGEFS_INIT_SEPARATE 
    . jobs/JGEFS_NCEPPOST 
    . jobs/JGEFS_POST_CLEANUP 
    . jobs/JGEFS_POST_TRACK 
    . jobs/JGEFS_PRDGEN 
    . jobs/JGEFS_PRDGEN_GFS 
    . jobs/JGEFS_RESTART_COPY 
    . jobs/JGEFS_SIGCHGRES 

    . scripts/exgefs_enspost.sh.ecf 
    . scripts/exgefs_ensstat.sh.ecf 
    . scripts/exgefs_init_combine.sh.ecf 
    . scripts/exgefs_init_et.sh.ecf 
    . scripts/exgefs_init_separate.sh.ecf 
    . scripts/exgefs_nceppost.sh.ecf 
    . scripts/exgefs_prdgen_gfs_grb2.sh.ecf 
    . scripts/exgefs_prdgen_gfs.sh.ecf 
    . scripts/exgefs_prdgen.sh.ecf 

    . ush/extrkr_2015.sh 
    . ush/gefs_init_pair_combine.sh 
    . ush/gefs_init_pair_separate.sh 
    . ush/gefs_prdgen_lowres.sh 
    . ush/gefs_prdgen.sh 

    . util/ush/ens_trak_ave.sh 
    . util/ush/extrkr.sh 

    . parm/gefs_config 

. Added folder/files
    . ush/global_chgres.sh
    . parm/nam_micro_lookup.dat

    . sorc/esmf.3_1_0rp5
    . sorc/global_chgres.fd
    . sorc/global_sighdr.fd
    . sorc/global_sfchdr.fd
    . sorc/oerparm_grib.fd

. Changes made to the code/scripts to support new architecture
    . compile codes with new versions of compiler and libraries
    . replace /nwprod/exec and /nwprod/ush with utility locations in production libraries and dell versions of gsm and post

. Changes not related to the transition
    . none

. Changes to incoming data
    . none

. Changes to output file names
    . none

. Compute resource information

    . init_separate    	    40 tasks,  3 nodes
    . init_et              160 tasks,  8 nodes            
    . init_combine          40 tasks,  2 nodes  

    . forecast_high (00Z), 840 tasks, 30 nodes
    . forecast_low  (00Z), 378 tasks, 14 nodes
    . 6-hour forecasts, 378 tasks/14 nodes and 360 tasks/13 nodes
 
    . sigchgres              1 task,   1 node   not shared
 
    . post high		         8 tasks,  1 node   not shared
    . prdgen high           				shared  core  mem=200
    . post low		         8 tasks,  1 node   not shared
    . prdgen low		   				shared  core  mem=200
 
    . ensstat		     				shared  core  mem=100
    . enspost		     				shared  core  mem=100
    . tracker		         1 task,   1 node   not shared
    . track_ave						shared  core  mem=1000
	
. Runtimes
    . initialization and forecast are tuned for runtimes similar to phase 1
    . forecast (but not init) runtime can be adjusted by changing nodes and tasks

    . init_separate        ~6 min for 3 storms
        . varies significantly with  number of storms
    . init_et		   ~3 min
    . init_combine         ~2 min for 3 storms
        . varies slightly with number of storms
    . forecast high (00z) ~30 min
    . forecast low  (00Z) ~30 min
    . 6-hour forecasts     ~3 min
    . sigchgres            <1 min
    . postprocessing jobs depend on the corresponding forecast
        . post high        ~30 min
        . prdgen high      ~30 min
        . ensstat high     ~30 min
        . post low         ~30 min
        . prdgen low       ~30 min
        . enstat low       ~30 min
        . enspost          ~20 min 
        . 6-hour post       ~3 min
        . 6-hour prdgen     ~3 min
    . tracker (3 storms)	~2 min
    . trak_ave  (3 storms)    <1 min
    . 6-hour tracker (3 st)   <1 min

. Disk space per cycle
    . no significant change
    . /com space needed before internal cleanup
        00Z             ~515 GB
        06Z, 12Z, 18Z   ~75 GB each
    . /nwges
        each cycle	    ~12 GB
	
. Dissemination
    . No change

. HPSS archiving
    . No Change

. Upstream Dependencies
    . GFS

. Downstream Dependencies
    . none


. Implementation instructions
    . Make sure ncep_post.v5.1.3 installed on DELL p3
    . Make sure gsm.v12.1.6 installed on DELL p3
    . Copy versions/gefs_legacy.ver to ~/nwprod   (nwtest for testing)
    . Copy the gefs_legacy gefs_legacy_v10.5.0 tag to ~/nwprod  and rename it gefs_legacy_v10.5.0
    . Build codes: in sorc directory of new tag, follow the directions in the release note README.build
